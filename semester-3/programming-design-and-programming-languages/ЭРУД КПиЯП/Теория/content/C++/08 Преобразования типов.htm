<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="08%20Преобразования%20типов.files/filelist.xml">
<title>Преобразования типов</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>KEV</o:Author>
  <o:LastAuthor>KEV</o:LastAuthor>
  <o:Revision>4</o:Revision>
  <o:TotalTime>3</o:TotalTime>
  <o:Created>2011-04-06T17:41:00Z</o:Created>
  <o:LastSaved>2011-04-06T20:08:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>997</o:Words>
  <o:Characters>5688</o:Characters>
  <o:Company>HOME</o:Company>
  <o:Lines>47</o:Lines>
  <o:Paragraphs>13</o:Paragraphs>
  <o:CharactersWithSpaces>6672</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:19.85pt;
	mso-pagination:none;
	font-size:14.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h2
	{mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:36.0pt;
	mso-pagination:widow-orphan lines-together;
	mso-outline-level:2;
	font-size:14.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-bidi-font-weight:normal;
	font-style:italic;
	mso-bidi-font-style:normal;}
h3
	{mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:19.85pt;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:14.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-indent:19.85pt;
	mso-pagination:none;
	font-size:14.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-weight:bold;
	mso-bidi-font-style:italic;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=RU style='tab-interval:35.4pt'>

<div class=Section1>

<h2 align=center style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-align:center;text-indent:0cm'><a name="_Toc38620066"></a><a
name="_Toc516651330"></a><a name="_Toc516652075"></a><a name="_Toc519256590"></a><a
name="_Toc54192022"></a><a name="_Toc54192138"></a><a name="_Toc54192387"></a><a
name="_Toc54192620"></a><a name="_Toc54193364"></a><a name="_Toc54855904"></a><a
name="_Toc54861083"></a><a name="_Toc55028908"></a><a name="_Toc79847788"></a><a
name="_Toc117269053"><span style='mso-bookmark:_Toc79847788'><span
style='mso-bookmark:_Toc55028908'><span style='mso-bookmark:_Toc54861083'><span
style='mso-bookmark:_Toc54855904'><span style='mso-bookmark:_Toc54193364'><span
style='mso-bookmark:_Toc54192620'><span style='mso-bookmark:_Toc54192387'><span
style='mso-bookmark:_Toc54192138'><span style='mso-bookmark:_Toc54192022'><span
style='mso-bookmark:_Toc519256590'><span style='mso-bookmark:_Toc516652075'><span
style='mso-bookmark:_Toc516651330'><span style='mso-bookmark:_Toc38620066'>Преобразования
типов</span></span></span></span></span></span></span></span></span></span></span></span></span></a></h2>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:0cm'><span style='mso-bookmark:_Toc117269053'><span
style='mso-bookmark:_Toc79847788'><span style='mso-bookmark:_Toc55028908'><span
style='mso-bookmark:_Toc54861083'><span style='mso-bookmark:_Toc54855904'><span
style='mso-bookmark:_Toc54193364'><span style='mso-bookmark:_Toc54192620'><span
style='mso-bookmark:_Toc54192387'><span style='mso-bookmark:_Toc54192138'><span
style='mso-bookmark:_Toc54192022'><span style='mso-bookmark:_Toc519256590'><span
style='mso-bookmark:_Toc516652075'><span style='mso-bookmark:_Toc516651330'><span
style='mso-bookmark:_Toc38620066'><o:p>&nbsp;</o:p></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>

<h2 style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;margin-left:
0cm'><span style='mso-bookmark:_Toc117269053'><span style='mso-bookmark:_Toc79847788'><span
style='mso-bookmark:_Toc55028908'><span style='mso-bookmark:_Toc54861083'><span
style='mso-bookmark:_Toc54855904'><span style='mso-bookmark:_Toc54193364'><span
style='mso-bookmark:_Toc54192620'><span style='mso-bookmark:_Toc54192387'><span
style='mso-bookmark:_Toc54192138'><span style='mso-bookmark:_Toc54192022'><span
style='mso-bookmark:_Toc519256590'><span style='mso-bookmark:_Toc516652075'><span
style='mso-bookmark:_Toc516651330'><span style='mso-bookmark:_Toc38620066'>Преобразование
типа</span></span></span></span></span></span></span></span></span></span></span></span></span></span></h2>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Выражения, содержащиеся в функциях и используемые для вычисления не­которого
значения, записываются в большинстве случаев с учетом корректности по отношению
к объектам этого выражения. В то же время, если используемая операция для типов
величин, участвующих в выражении, явно не определена, то компилятор пытается
выполнить такое <i style='mso-bidi-font-style:normal'>преобразование типов</i>
в два этапа.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>На первом этапе выполняется попытка использовать стандартные
преобразования типов. Если это невозможно, то компилятор использует
преобразования, определенные пользователем.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'><o:p>&nbsp;</o:p></span></p>

<h3 style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;margin-left:
0cm;text-indent:36.0pt'><a name="_Toc38620067"></a><a name="_Toc516651331"></a><a
name="_Toc516652076"></a><a name="_Toc519256591"></a><a name="_Toc54192023"></a><a
name="_Toc54192139"></a><a name="_Toc54192388"></a><a name="_Toc54192621"></a><a
name="_Toc54193365"></a><a name="_Toc54855905"></a><a name="_Toc54861084"></a><a
name="_Toc55028909"></a><a name="_Toc79847789"></a><a name="_Toc117269054"><span
style='mso-bookmark:_Toc79847789'><span style='mso-bookmark:_Toc55028909'><span
style='mso-bookmark:_Toc54861084'><span style='mso-bookmark:_Toc54855905'><span
style='mso-bookmark:_Toc54193365'><span style='mso-bookmark:_Toc54192621'><span
style='mso-bookmark:_Toc54192388'><span style='mso-bookmark:_Toc54192139'><span
style='mso-bookmark:_Toc54192023'><span style='mso-bookmark:_Toc519256591'><span
style='mso-bookmark:_Toc516652076'><span style='mso-bookmark:_Toc516651331'><span
style='mso-bookmark:_Toc38620067'><span style='mso-bidi-font-size:12.0pt;
mso-bidi-font-weight:normal;mso-bidi-font-style:normal'>Явные преобразования
типов</span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><span
style='mso-bidi-font-size:12.0pt;mso-bidi-font-weight:normal;mso-bidi-font-style:
normal'><o:p></o:p></span></h3>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Явное приведение типа выполненное в стиле языка<span class=GramE> С</span>
имеет вид:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>(тип) выражение.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:0cm'><span style='mso-bidi-font-size:12.0pt'>То
есть если перед выражением указать имя типа в круглых скобках, то значение
выражения будет преобразовано к данному типу. Например:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=SpellE><span
class=GramE><span lang=EN-US style='mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-ansi-language:EN-US'>int</span></span></span><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'> a = (<span class=SpellE>int</span>) b;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>char</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> *s=(char *) <span
class=SpellE>addr</span>;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Недостатком их является полное отсутствие контроля, что приводит к
ошибкам и путанице. Существует большая разница между приведением указателя на <span
class=SpellE>const</span> объект к указателю на не <span class=SpellE>const</span>
объект (изменяется только атрибут объекта), и приведением указателя на объект
базового класса к указателю на объект производного класса (изменяется полностью
тип указателя).<span style='mso-spacerun:yes'>  </span>Было бы неплохо более
точно определять цель каждого приведения. Чтобы преодолеть недостатки
приведения типов выполняемых в стиле языка<span class=GramE> С</span>, в язык
С++ введены четыре оператора приведения типа: </span><span class=SpellE>static_cast</span>,
<span class=SpellE>const_cast</span>,<span style='mso-spacerun:yes'>  </span><span
class=SpellE><span style='mso-bidi-font-size:10.0pt'>dynamic_cast</span></span>
и <span class=SpellE>reinterpret_cast</span><span style='mso-bidi-font-size:
12.0pt'>. Спецификация преобразования имеет следующий вид:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=SpellE><b><span
style='mso-bidi-font-size:12.0pt'>оператор_приведения</span></b></span><b><span
style='mso-bidi-font-size:12.0pt'> _типа&lt;тип&gt; (выражение).</span></b><span
style='mso-bidi-font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Для преобразования с минимальным контролем можно использовать оператор <span
class=SpellE>staic_cast</span>. Он позволяет выполнять преобразования, не
проверяя типы выражений во время выполнения, а основываясь на сведениях,
полученных при компиляции. Оператор <span class=SpellE>static_cast</span>
позволяет выполнять <span class=GramE>преобразования не только указателя на
базовый класс к указателю на производный, но и наоборот.</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=SpellE><span
class=GramE><span lang=EN-US style='mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-ansi-language:EN-US'>int</span></span></span><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'> <span class=SpellE>i,j</span>;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>double</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> d=<span class=SpellE>static_cast</span>&lt;double&gt;(<span
class=SpellE>i</span>)*j;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>В то же время, например, преобразование <span class=SpellE>int</span> к
<span class=SpellE>int</span>*<span style='mso-spacerun:yes'>  </span>(и
обратно) приведет к ошибке компиляции. Рассматриваемые далее операторы
приведения используются для более узкого круга задач. Для преобразований не
связанных между собой типов используется <span class=SpellE>reinterpret_cast</span>.
<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=SpellE><span
class=GramE><span lang=EN-US style='mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-ansi-language:EN-US'>int</span></span></span><span class=GramE><span
lang=EN-US style='mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span><span
class=SpellE>i</span></span></span><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>void</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> *<span class=SpellE>adr</span>=
<span class=SpellE>reinterpret_cast</span>&lt;void *&gt; (<span class=SpellE>i</span>);</span><span
lang=EN-US style='mso-bidi-font-size:12.0pt;mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:0cm'><span style='mso-bidi-font-size:12.0pt'>Необходимо
отметить, что <span class=SpellE>reinterpret_cast</span> не выполнит
преобразование таких типов как <span class=SpellE>float</span>, <span
class=SpellE>double</span>, объектов к типу указателя.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Если же нужно выполнить преобразование выражения имеющего тип с
атрибутами <span class=SpellE>char</span> и </span><span class=SpellE><span
style='color:red'>volatile</span></span><span style='mso-bidi-font-size:12.0pt'>
к типу без них, то можно использовать оператор <span class=SpellE>const_cast</span>:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='font-family:"Courier New";mso-ansi-language:EN-US'>const</span></span><span
lang=EN-US style='font-family:"Courier New";mso-ansi-language:EN-US'> char *s;<o:p></o:p></span></p>

<p class=MsoToc1 style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'>char *<span class=SpellE>ss</span>=<span class=SpellE>const_cast</span>&lt;char*&gt;
(s);</span><span lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'>Следующий оператор <span class=SpellE>dynamic_cast</span>
предназначен для приведения указателя или ссылки на объект базового класса к указателям
или ссылкам на объекты производных классов. При этом можно определить, была ли
попытка приведения типа успешной. В результате неудачной попытки преобразования
возвращается либо нулевой указатель, либо возникает исключение (при
преобразовании ссылок).</p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span class=GramE><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'>class</span></span><span lang=EN-US
style='font-family:"Courier New";mso-ansi-language:EN-US'> A { .<span
style='mso-spacerun:yes'>  </span>.<span style='mso-spacerun:yes'>  </span>. };<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span class=GramE><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'>class</span></span><span lang=EN-US
style='font-family:"Courier New";mso-ansi-language:EN-US'> B : public A {
.<span style='mso-spacerun:yes'>  </span>.<span style='mso-spacerun:yes'> 
</span>.};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span class=GramE><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'>class</span></span><span lang=EN-US
style='font-family:"Courier New";mso-ansi-language:EN-US'> C : public B {
.<span style='mso-spacerun:yes'>  </span>.<span style='mso-spacerun:yes'> 
</span>.};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span class=GramE><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'>main()</span></span><span lang=EN-US
style='font-family:"Courier New";mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span class=GramE><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'>{<span style='mso-spacerun:yes'> 
</span>A</span></span><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'> *pa;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span>B *<span
class=SpellE><span class=GramE>pb</span></span>;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span>C *pc;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>     </span>.<span
style='mso-spacerun:yes'>  </span>.<span style='mso-spacerun:yes'>  </span>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>     </span><span
class=GramE>pa</span>= <span class=SpellE>dynamic_cast</span>&lt;A*&gt;(pc);<span
style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span lang=EN-US style='font-family:"Courier New";
mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>     </span><span
class=SpellE><span class=GramE>pb</span></span>= <span class=SpellE>dynamic_cast</span>&lt;B*&gt;(pc);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm'><span style='font-family:"Courier New"'>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'><o:p>&nbsp;</o:p></span></p>

<h3 style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;margin-left:
0cm;text-indent:36.0pt'><a name="_Toc38620068"></a><a name="_Toc516651332"></a><a
name="_Toc516652077"></a><a name="_Toc519256592"></a><a name="_Toc54192024"></a><a
name="_Toc54192140"></a><a name="_Toc54192389"></a><a name="_Toc54192622"></a><a
name="_Toc54193366"></a><a name="_Toc54855906"></a><a name="_Toc54861085"></a><a
name="_Toc55028910"></a><a name="_Toc79847791"></a><a name="_Toc117269055"><span
style='mso-bookmark:_Toc79847791'><span style='mso-bookmark:_Toc55028910'><span
style='mso-bookmark:_Toc54861085'><span style='mso-bookmark:_Toc54855906'><span
style='mso-bookmark:_Toc54193366'><span style='mso-bookmark:_Toc54192622'><span
style='mso-bookmark:_Toc54192389'><span style='mso-bookmark:_Toc54192140'><span
style='mso-bookmark:_Toc54192024'><span style='mso-bookmark:_Toc519256592'><span
style='mso-bookmark:_Toc516652077'><span style='mso-bookmark:_Toc516651332'><span
style='mso-bookmark:_Toc38620068'><span style='mso-bidi-font-size:12.0pt;
mso-bidi-font-weight:normal;mso-bidi-font-style:normal'>Преобразования типов,
определенных в программе</span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><span
style='mso-bidi-font-size:12.0pt;mso-bidi-font-weight:normal;mso-bidi-font-style:
normal'><o:p></o:p></span></h3>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Конструктор с одним аргументом можно явно не вызывать. <o:p></o:p></span></p>

<p class=MsoToc1 style='margin-bottom:6.0pt;text-indent:36.0pt'><span
lang=EN-US style='font-family:"Courier New";mso-ansi-language:EN-US'>#include
&quot;<span class=SpellE>iostream.h</span>&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><b><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>class</span></b></span><b><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'> <span class=SpellE>my_class</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>{<span
style='mso-spacerun:yes'>     </span><span class=GramE>double</span> <span
class=SpellE>x,y</span>;<span style='mso-spacerun:yes'>    </span>//<span
style='mso-spacerun:yes'>     </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>   </span><span class=GramE>public</span>:<span
style='mso-spacerun:yes'>       </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>       </span><span class=SpellE>my_<span class=GramE>class</span></span><span
class=GramE>(</span>double X){x=X; y=x/3;}<span style='mso-spacerun:yes'>     
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>       </span><span class=GramE>double</span> summa();<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'> </span>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>double</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> <span class=SpellE>my_class::summa</span>()
{ return <span class=SpellE>x+y</span>; }<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=SpellE><span style='mso-bidi-font-size:
12.0pt;font-family:"Courier New"'>void</span></span><span style='mso-bidi-font-size:
12.0pt;font-family:"Courier New"'> <span class=SpellE>main</span>()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span style='mso-bidi-font-size:
12.0pt;font-family:"Courier New"'>{ <span class=SpellE>double</span> <span
class=SpellE>d</span>;</span></span><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-spacerun:yes'>  </span><span
class=SpellE>my_class</span> my_obj1(15),<span style='mso-spacerun:yes'>   
</span>// создание объекта obj1 и инициализация его <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-spacerun:yes'> 
</span>my_obj2=my_class(15),<span style='mso-spacerun:yes'>    </span>//
создание объекта obj2 и инициализация его <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-spacerun:yes'> 
</span>my_obj3=15;<span style='mso-spacerun:yes'>              </span>//
создание объекта obj3 и инициализация его <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-spacerun:yes'>  </span></span><span
lang=EN-US style='mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-ansi-language:EN-US'>d=my_obj1<span class=GramE>;<span
style='mso-spacerun:yes'>  </span>/</span>/ error no operator defined which
takes a right-hand operand of<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>                       </span>// type 'class <span
class=SpellE>my_class</span>' (or there is no acceptable conversion)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>  </span><span class=SpellE><span class=GramE>cout</span></span>
&lt;&lt; my_obj1.summa() &lt;&lt; <span class=SpellE>endl</span>;<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>  </span><span class=SpellE><span class=GramE>cout</span></span>
&lt;&lt; my_obj2.summa() &lt;&lt; <span class=SpellE>endl</span>;<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>  </span><span class=SpellE><span class=GramE>cout</span></span>
&lt;&lt; my_obj3.summa() &lt;&lt; <span class=SpellE>endl</span>;<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>} <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>В рассматриваемом примере все три создаваемых объекта будут
инициализированы числом 15 (первые два явным, третий неявным вызовом
конструктора). Следовательно, значение базовой переменной (определенной в
языке) может быть присвоено переменной типа, определенного пользователем.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Для выполнения обратных преобразований, то есть от переменных, имеющих
тип, определенный пользователем к базовому типу, можно задать преобразования с
помощью соответствующей функции <span class=SpellE>operator</span>(), например:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>class</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> <span class=SpellE>my_class</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>{<span
style='mso-spacerun:yes'>   </span><span class=GramE>double</span> <span
class=SpellE>x,y</span>;<span style='mso-spacerun:yes'>      </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'> </span><span class=GramE>public</span>: <span
style='mso-tab-count:1'>    </span><span style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>      </span><span class=GramE>operator</span>
double() {return x;}<span style='mso-tab-count:1'>   </span> <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>      </span><span class=SpellE>my_<span class=GramE>class</span></span><span
class=GramE>(</span>double X){x=X; y=x/3;}<span
style='mso-spacerun:yes'>            </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>      </span></span><span class=SpellE><span
style='mso-bidi-font-size:12.0pt;font-family:"Courier New"'>double</span></span><span
style='mso-bidi-font-size:12.0pt;font-family:"Courier New"'> <span
class=SpellE>summa</span>();<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Теперь в выражении d=my_obj1 не будет ошибки, так как мы задали прямое
преобразование типа. При выполнении этой инструкции активизируется функция <span
class=SpellE>operator</span>, преобразующая значение объекта к типу <span
class=SpellE>double</span> и возвращающая значение компоненты объекта . Наряду
с прямым преобразованием в<span class=GramE> С</span>++ имеется подразумеваемое
преобразование типа:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>#include &quot;<span
class=SpellE>iostream.h</span>&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><b><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>class</span></b></span><b><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'> my_cl1<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>{<span
style='mso-spacerun:yes'>     </span><span class=GramE>double</span> x;<span
style='mso-spacerun:yes'>                       </span>//<span
style='mso-spacerun:yes'>     </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>    </span><span class=GramE>public</span>:<span
style='mso-spacerun:yes'>           </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>       </span><span class=GramE>operator</span>
double(){return x;}<span style='mso-spacerun:yes'>           </span><o:p></o:p></span></p>

<p class=MsoToc1 style='margin-bottom:6.0pt'><span lang=EN-US style='font-family:
"Courier New";mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>      
</span>my_cl1(double X) : x(X) {}<span style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>}; <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><b><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>class</span></b></span><b><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'> my_cl2<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>{<span
style='mso-spacerun:yes'>     </span><span class=GramE>double</span> x;<span
style='mso-spacerun:yes'>                       </span>//<span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>   </span><span class=GramE>public</span>: <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>       </span><span class=GramE>operator</span> double(){return
x;}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>       </span>my_<span class=GramE>cl2(</span>my_cl1
XX):<span style='mso-spacerun:yes'>  </span>x(XX) {}<span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>void</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> fun(my_cl2 YY)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>{ <span class=SpellE>cout</span></span></span><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'> &lt;&lt; YY &lt;&lt;<span class=SpellE>endl</span>; }<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>void</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'> main()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
EN-US'>{ fun</span></span><span lang=EN-US style='mso-bidi-font-size:12.0pt;
font-family:"Courier New";mso-ansi-language:EN-US'>(12);<span
style='mso-spacerun:yes'>                             </span>// ERROR cannot
convert parameter 1<span style='mso-spacerun:yes'>       </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>                                    </span><span
style='mso-spacerun:yes'>   </span>//<span style='mso-spacerun:yes'> 
</span>from 'const <span class=SpellE>int</span>' to 'class my_cl2'<span
style='mso-spacerun:yes'>   </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span lang=EN-US style='mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><span
style='mso-spacerun:yes'>    </span></span><span class=SpellE><span
style='mso-bidi-font-size:12.0pt;font-family:"Courier New"'>fun</span></span><span
style='mso-bidi-font-size:12.0pt;font-family:"Courier New"'>(my_cl2(12));<span
style='mso-spacerun:yes'>              </span>// подразумеваемое преобразование
типа<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>} <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>В этом случае для инструкции <span class=SpellE>fun</span>(my_cl2(12))
выполняется следующее:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>активизируется конструктор класса my_cl1 (<span class=SpellE>x</span>
инициализируется значением 12);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>при выполнении в конструкторе my_cl2 инструкции <span class=SpellE>x</span>(XX)<span
style='mso-spacerun:yes'>  </span>вызывается функция <span class=SpellE>operator</span>
(класса my_cl1), возвращающая значение переменной <span class=SpellE>x</span>,
преобразованное к типу <span class=SpellE>double</span>;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>далее при выполнении инструкции <span class=SpellE>cout</span> &lt;&lt;
YY вызывается функция <span class=SpellE>operator</span>() класса my_cl2,
выполняющая преобразование значения объекта YY к типу <span class=SpellE>double</span>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>Разрешается выполнять только одноуровневые подразумеваемые
преобразования. В приведенном выше примере инструкция <span class=SpellE>fun</span>(12)
соответствует двухуровневому неявному преобразованию, где первый уровень -<span
style='mso-spacerun:yes'>  </span>my_cl1(12) и второй - my_cl2(my_cl1(12))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>В заключение отметим основные правила <span class=SpellE>доопределения</span>
операторов:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>- все операторы языка С++ за исключением . *<span class=GramE> :</span>:
?: <span class=SpellE>sizeof</span> и символов # ## можно доопределять;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>- при вызове<span style='mso-spacerun:yes'>  </span>функции <span
class=SpellE>operator</span> используется механизм перегрузки функций;<span
style='mso-spacerun:yes'>         </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:36.0pt'><span style='mso-bidi-font-size:
12.0pt'>- количество операндов, которыми оперируют операторы (унарные,
бинарные), и приоритет операций сохраняются и для доопределенных операторов.<o:p></o:p></span></p>

<h2 style='margin-top:12.0pt;margin-right:0cm;margin-bottom:12.0pt;margin-left:
0cm;text-indent:0cm'><o:p>&nbsp;</o:p></h2>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:0cm;text-indent:0cm'><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
